@startuml
    partition JSON Extractor {
        split
        -[hidden]->
        package main {
            group main() {
                :get config from file;
                :Get producer server using config;
                :Get consumer server using config;
                :Get JQTransformer using config;
                :Start App;
                detach
            }
            group getConfigFromFile(pathToConfig) Config {
                :Read config from file;
                :Separate config into producerConfig,\nconsumerConfig, jqTransformerConfig;
                :Return config;
                detach
            }
        }
        split again
        -[hidden]->
        package JqTransformer {
            group getJQTransformer(JqTransformerConfig) (JQTransformer, error) {
                :Create JQTransformer using config;
                :Return JQTransformer;
                detach
            }
            group Serve(JQTransformer) error {
                :empty go routine that cancels on a context;
                detach
            }
            group GetReceiver(JQTransformer) (Receiver, error) {
                :Return Receiver;
                detach
            }
            group AddReceiver(JQTransformer, Receiver) error {
                :Add Receiver to JQTransformer;
                detach
            }
            group HandleIncomingData(JQTransformer, AppData) error {
                :Extract JSON data from AppData using compiled jqProgram;
                :Create AppData with extracted data and CompletionHandler;
                :Send AppData to added Receiver;
                detach
            }
        }
        end split
    }
@enduml