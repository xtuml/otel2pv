@startuml
namespace JSONExtractor {
    struct JQTransformerConfig {
        +map[string]string JQQueryStrings
        +error IngestConfig(map[string]any)
    }
    struct JQTransformer {
        -gojq.Code jqProgram
        -Pushable pushable
        +error AddPushable(Pushable)
        +error SendTo(*AppData)
        +error Serve()
        +error Setup(Config)
    }
}
namespace Server {
    interface CompletionHandler {
        +error Complete(any, error)
    }
    struct WaitGroupCompletionHandler {
        -sync.WaitGroup wg
        -any data
        -error error
        -bool isComplete
        +error Complete(any, error)
    }
    struct AppData {
        -any data
        +CompletionHandler completionHandler
        +any GetData()
        +CompletionHandler GetCompletionHandler()
    }
    interface Server {
        +error Serve()
        +error Setup(Config)
    }
    interface Pullable {
        +error AddPushable(Pushable)
    }
    interface Pushable {
        +error SendTo(*AppData)
    }
    interface SourceServer {
        +error AddPushable(Pushable)
        +error Serve()
        +error Setup(Config)
    }
    interface SinkServer {
        +error SendTo(*AppData)
        +error Serve()
        +error Setup(Config)
    }
    interface PipeServer {
        +error AddPushable(Pushable)
        +error SendTo(*AppData)
        +error Serve()
        +error Setup(Config)
    }
    interface Producer {
        +error SendTo(*AppData)
        +error Serve()
        +error Setup(Config)
    }
    struct HTTPProducer {
        -HTTPProducerConfig config
        -http.Client httpClient
        +error SendTo(*AppData)
        +error Serve()
        +error Setup(Config)
    }
    interface Consumer {
        +error AddPushable(Pushable)
        +error Serve()
        +error Setup(Config)
    }
    struct MapSinkServer {
        -map[string]SinkServer sinkServerMap
        +error SendTo(*AppData)
        +error Serve()
        +error Setup(Config)
    }
    interface Config {
        +error IngestConfig(map[string]any)
    }
    struct HTTPProducerConfig {
        +string URL
        +int NumRetries
        +int Timeout
        +error IngestConfig(map[string]any)
    }
    struct SelectProducerConfig {
        +string Map
        +string Type
        +Config ProducerConfig
        +error IngestConfig(map[string]any)
    }
}
Server.CompletionHandler <|-- Server.WaitGroupCompletionHandler
Server.CompletionHandler *-- Server.AppData
Server.AppData *-- Server.Pushable
Server.Server <|-- Server.SourceServer
Server.Pushable *-- Server.Pullable
Server.Pullable <|-- Server.SourceServer
Server.Server <|-- Server.SinkServer
Server.Pushable <|-- Server.SinkServer
Server.Pushable <|-- Server.PipeServer
Server.Pullable <|-- Server.PipeServer
Server.Server <|-- Server.PipeServer

Server.SinkServer <|-- Server.Producer
Server.SinkServer *-- Server.MapSinkServer
Server.SinkServer <|-- Server.MapSinkServer
Server.SourceServer <|-- Server.Consumer

Server.PipeServer <|-- JSONExtractor.JQTransformer
Server.Pushable *-- JSONExtractor.JQTransformer


Server.Server *-- Server.Config
Server.Config <|-- JSONExtractor.JQTransformerConfig
Server.Config <|-- Server.HTTPProducerConfig
Server.Config <|-- Server.SelectProducerConfig
Server.Producer <|-- Server.HTTPProducer
Server.HTTPProducerConfig *-- Server.HTTPProducer
@enduml