@startuml
namespace JSONExtractor {
    struct JQTransformer {
        -string jqQuery
        -Code jqProgram
        -Receiver receiver
        +error AddReceiver(Receiver)
        +Receiver GetReceiver()
        +error Serve()
    }
}
namespace Server {
    interface CompletionHandler {
        +error Complete(any, error)
    }
    struct KafkaConsumerCompletionHandler {
        +error Complete(any, error)
    }
    struct AppData {
        -any data
        +CompletionHandler completionHandler
        +any SendTo()
    }
    interface Receiver {
        +error Receive(AppData)
    }
    struct ChanReceiver {
        -chan AppData dataChan
        +error Receive(AppData)
    }
    interface Server {
        +error Serve()
    }
    interface Pullable {
        +error AddReceiver(*Receiver)
    }
    interface Pushable {
        +Receiver GetReceiver()
    }
    interface SourceServer {
        +error AddReceiver(Receiver)
        +error Serve()
    }
    interface SinkServer {
        +Receiver GetReceiver()
        +error Serve()
    }
    interface PipeServer {
        +error AddReceiver(Receiver)
        +Receiver GetReceiver()
        +error Serve()
    }
    struct ProducerResponse {
        -error error
        +error GetError()
    }
    interface Producer {
        +ProducerInstance GetInstance()
        +error Setup(ProducerConfig)
        +error Start()
        +ProducerResponse Send(any)
    }
    interface Consumer {
        +error AddReceiver(Receiver)
        +error Setup(ConsumerConfig)
        +error Serve()
    }
    struct KafkaConsumer {
        +error AddReceiver(Receiver)
        +error Setup(KafkaConsumerCofig)
        +error Serve()
    }
    struct KafkaProducer {
        +error Setup(KafkaProducerConfig)
        +error Start()
        +ProducerResponse Send(any)
    }
    struct ProducerServer {
        -map[string]Producer producerMap
        -Receiver receiver
        +Receiver GetReceiver()
        +error Serve()
    }
    struct ConsumerServer {
        -map[string]Consumer consumersMap
        +error AddReceiver(Receiver)
        +error Serve()
    }
    struct KafkaConsumerCofig
    struct KafkaProducerConfig
    struct ProducerConfig
    struct ConsumerConfig
}
Server.CompletionHandler *-- Server.AppData
Server.CompletionHandler <|-left- Server.KafkaConsumerCompletionHandler
Server.AppData *-- Server.Receiver
Server.Receiver *-- Server.Pullable
Server.Receiver *-- Server.Pushable
Server.Receiver <|-left- Server.ChanReceiver
Server.Server <|-- Server.SourceServer
Server.Pullable <|-- Server.SourceServer
Server.Server <|-- Server.SinkServer
Server.Pushable <|-- Server.SinkServer
Server.Pushable <|-- Server.PipeServer
Server.Pullable <|-- Server.PipeServer
Server.Server <|-- Server.PipeServer

Server.ProducerResponse *-right- Server.Producer
Server.Producer <|-- Server.KafkaProducer
Server.Consumer <|-- Server.KafkaConsumer
Server.Producer *-up- Server.ProducerServer
Server.SinkServer <|-- Server.ProducerServer
Server.Receiver *-- Server.ProducerServer
Server.SourceServer <|-left- Server.ConsumerServer
Server.Consumer *-- Server.ConsumerServer
Server.SourceServer <|-down- Server.Consumer

Server.KafkaConsumerCofig *-up- Server.KafkaConsumer
Server.KafkaProducerConfig *-up- Server.KafkaProducer

Server.PipeServer <|-- JSONExtractor.JQTransformer
Server.Receiver *-- JSONExtractor.JQTransformer

Server.ProducerConfig *-up- Server.KafkaProducerConfig
Server.ConsumerConfig *-up- Server.KafkaConsumerCofig
@enduml