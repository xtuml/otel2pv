@startuml
namespace Server {
    interface CompletionHandler {
        +error Complete(any, error)
    }
    struct AppData {
        -any data
        +CompletionHandler completionHandler
        +any GetData()
    }
    interface Server {
        +error Setup()
        +error Serve()
    }
    interface Pullable {
        +AppData, error Pull()
    }
    interface Pushable {
        +error Push(AppData)
    }
    interface SourceServer {
        +AppData, error Pull()
        +error Setup()
        +error Serve()
    }
    interface SinkServer {
        +error Push(AppData)
        +error Setup()
        +error Serve()
    }
    interface PipeServer {
        +AppData, error Pull()
        +error Push(AppData)
        +error Setup()
        +error Serve()
    }
    struct ProducerResponse {
        -error error
        +error GetError()
    }
    interface ProducerInstance {
        +ProducerResponse Send(any)
    }
    interface Producer {
        +ProducerInstance GetInstance()
    }
    struct KafkaConsumer {
        -KafkaConsumerCofig kafkaConsumerConfig
        +error Setup()
        +error Serve()
        +AppData, error Pull()
    }
    struct KafkaProducer {
        -KafkaProducerConfig kafkaProducerConfig
        +error Setup()
        +error Serve()
        +ProducerInstance GetInstance()
        +ProducerResponse Send(any)
    }
    struct ProducersServer {
        -map[string]Producer producerMap
        -ProducersConfig producersConfig
        +error Setup()
        +error Serve()
        +error Push(AppData)
    }
    struct ConsumersServer {
        -map[string]SourceServer consumersMap
        -ConsumersConfig consumersConfig
        +error Setup()
        +error Serve()
        +AppData, error Pull()
    }
    struct KafkaConsumerCofig
    struct KafkaProducerConfig
    struct ProducersConfig
    struct ConsumersConfig
}
namespace JSONExtractor {
    struct JQTransformer {
        -string jqQuery
        -*Code jqProgram
        +AppData, error Pull()
        +error Push(AppData)
        +error Setup()
        +error Serve()
    }
}
Server.CompletionHandler *-- Server.AppData
Server.AppData *-- Server.Pullable
Server.AppData *-- Server.Pushable
Server.Server <|-- Server.SourceServer
Server.Pullable <|-- Server.SourceServer
Server.Server <|-- Server.SinkServer
Server.Pushable <|-- Server.SinkServer
Server.Pushable <|-- Server.PipeServer
Server.Pullable <|-- Server.PipeServer
Server.Server <|-- Server.PipeServer

Server.ProducerResponse *-- Server.ProducerInstance
Server.ProducerInstance *-- Server.Producer
Server.Producer <|-- Server.KafkaProducer
Server.ProducerInstance <|-- Server.KafkaProducer
Server.SourceServer <|-- Server.KafkaConsumer
Server.Producer *-- Server.ProducersServer
Server.SinkServer <|-- Server.ProducersServer
Server.SourceServer <|-- Server.ConsumersServer
Server.SourceServer *-- Server.ConsumersServer

Server.KafkaConsumerCofig *-up- Server.KafkaConsumer
Server.KafkaProducerConfig *-up- Server.KafkaProducer
Server.ProducersConfig *-up- Server.ProducersServer
Server.ConsumersConfig *-up- Server.ConsumersServer

Server.PipeServer <|-up- JSONExtractor.JQTransformer
@enduml